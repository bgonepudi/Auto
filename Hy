# Define the Selenium Grid Console URL
$url = "http://your-grid-url:4444/grid/console"

# Fetch the HTML content from the Grid Console URL
$htmlContent = Invoke-WebRequest -Uri $url -UseBasicParsing

# Parse the HTML to find IP addresses of the nodes
# Assuming the IP addresses are in the form of "http://<ip-address>:port"
$ipPattern = "http://(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}):\d+"
$matches = [regex]::Matches($htmlContent.Content, $ipPattern)

# Extract and store unique IP addresses
$ips = $matches | ForEach-Object { $_.Groups[1].Value } | Sort-Object -Unique

# Loop through each IP address and ping it
foreach ($ip in $ips) {
    Write-Host "Pinging $ip..."
    $pingResult = Test-Connection -ComputerName $ip -Count 4 -ErrorAction SilentlyContinue

    if ($pingResult) {
        Write-Host "Node $ip is up and responding."
    } else {
        Write-Host "Node $ip is down or not responding."
    }
}
